language: node_js

# safelist
branches:
  only:
  - master
  - travis

before_install:
  - cd frontend
  - npm install
  - npm install -g typescript

install:
  - tsc

before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

script:
  - ./node_modules/karma/bin/karma start --single-run=true --browsers Firefox

before_deploy:
  - mkdir deploy
  - cp -r build deploy/
  - cp -r static deploy/
  - cp *.html deploy/
  - cp system.conf.js deploy/
  - ls -al deploy
  
# deploy upload deploy to S3. To do this, first test locally using cli  